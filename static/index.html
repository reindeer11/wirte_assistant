<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>智能写作助手</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Noto+Sans+SC:wght@400;500;700&display=swap"
        rel="stylesheet">
</head>

<body>
    <div class="app-container">
        <!-- Left Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-top">
                <div class="logo">
                    <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 19l7-7 3 3-7 7-3-3z"></path>
                        <path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"></path>
                        <path d="M2 2l7.586 7.586"></path>
                        <circle cx="11" cy="11" r="2"></circle>
                    </svg>
                </div>
                <button class="sidebar-btn new-chat active" id="newChatBtn" title="新对话">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="12" y1="5" x2="12" y2="19"></line>
                        <line x1="5" y1="12" x2="19" y2="12"></line>
                    </svg>
                </button>
            </div>
            <div class="sidebar-bottom">
                <a class="sidebar-btn" href="https://github.com/reindeer11" target="_blank" title="GitHub"
                    style="margin-bottom: 8px; color: inherit; display: flex; align-items: center; justify-content: center; text-decoration: none;">
                    <svg height="20" viewBox="0 0 16 16" version="1.1" width="20" aria-hidden="true"
                        stroke="currentColor" fill="currentColor">
                        <path fill-rule="evenodd"
                            d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
                        </path>
                    </svg>
                </a>
                <button class="sidebar-btn" title="设置">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="3"></circle>
                        <path
                            d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z">
                        </path>
                    </svg>
                </button>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- App Title Header -->
            <div class="app-header" style="padding: 16px 24px; display: flex; align-items: center; gap: 12px;">
                <div class="app-title-wrapper" style="position: relative; display: inline-block; cursor: pointer;"
                    id="appTitleWrapper">
                    <span style="font-size: 22px; font-weight: 600; color: var(--text);">
                        ✍️ 写作助手 <span style="font-size: 14px; color: var(--text-muted); font-weight: 400;">v0.1</span>
                    </span>
                    <div class="author-tooltip" id="authorTooltip"
                        style="position: absolute; top: 100%; left: 0; margin-top: 8px; padding: 8px 12px; background: var(--accent); color: white; border-radius: 8px; font-size: 12px; white-space: nowrap; opacity: 0; transform: translateY(-5px); transition: all 0.3s ease; pointer-events: none; box-shadow: 0 4px 12px rgba(0,0,0,0.15);">
                        作者：By reindeer 🦌
                    </div>
                </div>
            </div>
            <!-- Chat History (scrollable) -->
            <div class="chat-area" id="chatArea">
                <div class="welcome-message">
                    <h1>你好，欢迎使用智能写作助手</h1>
                    <p>我可以帮你分析写作需求、规划文章结构、生成初稿。告诉我你想写什么吧！</p>
                </div>
                <div class="messages" id="chatHistory"></div>
            </div>

            <!-- Input Area (Fixed at bottom) -->
            <div class="input-area">
                <div class="input-box" id="inputBox">
                    <div class="input-row">
                        <label class="upload-label" for="fileUpload" title="上传参考文件">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path
                                    d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48">
                                </path>
                            </svg>
                        </label>
                        <input type="file" id="fileUpload" hidden>
                        <span id="fileTag" class="file-tag hidden">
                            <span id="fileName">file.txt</span>
                            <span class="remove-file" id="removeFile">&times;</span>
                        </span>
                        <textarea id="userInput" placeholder="描述你想写的内容..." rows="1"></textarea>
                        <button class="send-button" id="sendBtn" title="发送">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <line x1="22" y1="2" x2="11" y2="13"></line>
                                <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="quick-actions">
                    <button class="quick-btn" id="openEditorBtn">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                            <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                        </svg>
                        打开编辑器
                    </button>
                </div>
            </div>
        </main>

        <!-- Right Editor Panel (Hidden by default, slides in) -->
        <aside class="editor-panel" id="editorPanel">
            <div class="panel-header">
                <h3>创作空间</h3>
                <div class="panel-controls">
                    <span class="status" id="statusText">就绪</span>
                    <button class="panel-btn primary" id="generateBtn" disabled>生成文章</button>
                    <button class="panel-btn" id="stopBtn" title="停止生成"
                        style="display:none; background:#e74c3c; color:white;">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <rect x="6" y="6" width="12" height="12"></rect>
                        </svg>
                        停止
                    </button>
                    <button class="panel-btn" id="editSettingsBtn" title="修改设置" style="display:none;">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <circle cx="12" cy="12" r="3"></circle>
                            <path
                                d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z">
                            </path>
                        </svg>
                        设置
                    </button>
                    <button class="panel-btn" id="expandBtn" title="扩展选中内容" style="display:none;">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <polyline points="15 3 21 3 21 9"></polyline>
                            <polyline points="9 21 3 21 3 15"></polyline>
                            <line x1="21" y1="3" x2="14" y2="10"></line>
                            <line x1="3" y1="21" x2="10" y2="14"></line>
                        </svg>
                        扩展
                    </button>
                    <button class="panel-btn" id="downloadBtn" title="下载Docx" style="display:none;">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                            <polyline points="7 10 12 15 17 10"></polyline>
                            <line x1="12" y1="15" x2="12" y2="3"></line>
                        </svg>
                    </button>
                    <button class="panel-btn close-panel" id="closePanelBtn" title="关闭">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18"></line>
                            <line x1="6" y1="6" x2="18" y2="18"></line>
                        </svg>
                    </button>
                </div>
            </div>
            <!-- Dynamic Options Section -->
            <div class="options-section hidden" id="optionsSection">
                <div class="options-header">
                    <span>写作配置</span>
                    <div style="display:flex; gap:8px;">
                        <button class="options-toggle" id="exportPromptBtn">导出提示词</button>
                        <button class="options-toggle" id="optionsToggle">收起</button>
                    </div>
                </div>
                <div class="options-container" id="optionsContainer"></div>
            </div>
            <div class="editor-wrapper">
                <textarea id="editor" placeholder="AI 分析结果或生成的文章将会显示在这里。你可以随时编辑内容..."></textarea>
            </div>
        </aside>
    </div>


    <script src="/static/js/app.js"></script>
</body>

</html>